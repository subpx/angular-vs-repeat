function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _sliceIterator(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}function _slicedToArray(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return _sliceIterator(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}!function(){for(var a=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),r=Math.max(0,16-(n-a)),o=window.setTimeout(function(){e(n+r)},r);return a=n+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(X,G){var K=G.element.prototype.closest;if(!K){var r=["matches","matchesSelector","webkitMatches","webkitMatchesSelector","msMatches","msMatchesSelector","mozMatches","mozMatchesSelector"].reduce(function(e,t){var n;return null!==(n=e)&&void 0!==n?n:t in document.documentElement?t:null},null);K=function(e){for(var t,n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[r](e);)n=n.parentNode;return(null===(t=n)||void 0===t?void 0:t[r](e))?G.element(n):G.element()}}function Q(){var e,t,n,r;return"pageYOffset"in X?{scrollTop:X.pageYOffset,scrollLeft:X.pageXOffset}:{scrollTop:null!==(e=null!==(t=document.documentElement.scrollTop)&&void 0!==t?t:document.body.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null!==(r=document.documentElement.scrollLeft)&&void 0!==r?r:document.body.scrollLeft)&&void 0!==n?n:0}}function V(e,t){return e===X?"clientWidth"===t?X.innerWidth:X.innerHeight:e[t]}function d(e,t){var n,r;n=t,r="".concat(e," attribute is deprecated. Pass the options object to vs-repeat attribute instead https://github.com/kamilkp/angular-vs-repeat#options"),console.warn("vs-repeat deprecation: ".concat(r),n[0])}var Z={latch:!1,container:null,scrollParent:null,size:null,offsetBefore:0,offsetAfter:0,scrolledToBeginning:G.noop,scrolledToEnd:G.noop,scrolledToBeginningOffset:0,scrolledToEndOffset:0,scrollMargin:0,horizontal:!1,autoresize:!1,hunked:!1,hunkSize:0},e=G.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(Y,U){return{restrict:"A",scope:!0,compile:function(t,n){var e="vsRepeatContainer"in n?G.element(t[0].querySelector(n.vsRepeatContainer)):t,r=e.children(),o=r.eq(0),L=o[0].outerHTML,H="$vs_collection";["vsSize","vsScrollParent","vsSizeProperty","vsHorizontal","vsOffsetBefore","vsOffsetAfter","vsScrolledToEndOffset","vsScrolledToBeginningOffset","vsExcess","vsScrollMargin"].forEach(function(e){e in n&&d(e,t)});var a=_slicedToArray(function(e){for(var t=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],n=0;n<t.length;n++){var r=t[n];if(e.attr(r))return[r,e.attr(r),0<=r.indexOf("-start")]}throw new Error("angular-vs-repeat: no ng-repeat directive on a child element")}(o),3),W=a[0],i=a[1],j=a[2],s=_slicedToArray(/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(i),4),D=s[1],N=s[2],J=s[3];if(j)for(var l=0,c=r.eq(l);null==c.attr("ng-repeat-end")&&null==c.attr("data-ng-repeat-end");)l++,c=r.eq(l),L+=c[0].outerHTML;return e.empty(),{pre:function(h,g,e,t,n){var r;function o(e){if("number"==typeof e.size)e.getSize=function(){return e.size};else{var t=U(String(e.size));e.getSize=function(e){return t(h,_defineProperty({},D,e))}}}h.vsRepeat={options:_extends({},Z,null!==(r=h.$eval(e.vsRepeat))&&void 0!==r?r:{})};var R=h.vsRepeat.options;o(R);var x,w=G.isDefined(e.vsRepeatContainer)?G.element(g[0].querySelector(e.vsRepeatContainer)):g,a=G.element(L),i=a[0].tagName.toLowerCase(),z=[],$=G.element("<"+i+' class="vs-repeat-before-content"></'+i+">"),y=G.element("<"+i+' class="vs-repeat-after-content"></'+i+">"),b=null===R.size,I=R.scrollParent?"window"===R.scrollParent?G.element(X):K.call(w,R.scrollParent):w,T=R.horizontal?"clientWidth":"clientHeight",s=R.horizontal?"offsetWidth":"offsetHeight",S=R.horizontal?"scrollWidth":"scrollHeight",A=R.horizontal?"scrollLeft":"scrollTop";if((h.vsRepeat.totalSize=0)===I.length)throw"Specified scroll parent selector did not match any element";if(h.vsRepeat.$scrollParent=I,h.vsRepeat.sizesCumulative=[],R.debug){var l="window"===R.scrollParent?G.element(document.body):I,c=G.element('<div class="vs-repeat-debug-element"></div>');c.css("position","window"===R.scrollParent?"fixed":"absolute"),l.append(c),h.$on("$destroy",function(){c.remove()})}var C,O,M,_,d,u=V(I[0],T)||50;function p(){!z||z.length<1?(h[H]=[],x=0,h.vsRepeat.sizesCumulative=[0]):(x=z.length,R.size?v():f()),E()}function v(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=z.map(function(e){var t;return null!==(t=n)&&void 0!==t?t:R.getSize(e)}),t=0;h.vsRepeat.sizesCumulative=[0].concat(_toConsumableArray(e.map(function(e){return t+=e})))}function f(){b?h.$$postDigest(function(){if(w[0].offsetHeight||w[0].offsetWidth){for(var e=w.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[W]||r){if(n||(u=0),n=!0,e[t][s]&&(u+=e[t][s]),!j)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(v(u),E(),b=!1,h.$root&&!h.$root.$$phase&&h.$digest())}else var o=h.$watch(function(){(w[0].offsetHeight||w[0].offsetWidth)&&(o(),f())})}):v(u)}function B(n){var r=R.horizontal?"width":"height";return["","min-","max-"].reduce(function(e,t){return e["".concat(t).concat(r)]=n,e},{})}function m(){var e=I[0][A];P()&&(h.$digest(),R._ensureScrollIntegrity&&(I[0][A]=e))}function q(){R.autoresize&&(b=!0,f(),h.$root&&!h.$root.$$phase&&h.$digest()),P()&&h.$digest()}function E(){var e;O=C=void 0,M=x,_=0,e=h.vsRepeat.sizesCumulative[x],h.vsRepeat.totalSize=R.offsetBefore+e+R.offsetAfter,P(),h.$emit("vsRepeatReinitialized",h.vsRepeat.startIndex,h.vsRepeat.endIndex)}function F(){var e=V(I[0],T);e!==d&&(E(),h.$root&&!h.$root.$$phase&&h.$digest()),d=e}function k(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.length-1,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1;if(e[n]===t)return[n,n,o];if(e[r]===t)return[r,r,o];if(1<r-n){var a=Math.floor((n+r)/2);return e[a]>t?k(e,t,n,a,o+1):k(e,t,a,r,o+1)}return[t>e[r]?r:n,t<e[n]?n:r,o]}function P(){var e,t,n=(e=I[0],t=A,e===X?Q()[t]:e[t]),r=V(I[0],T);R.debug&&(r/=2);var o,a,i,s=w[0]===I[0]?0:(o=w[0],a=I[0],i=R.horizontal,o.getBoundingClientRect()[i?"left":"top"]-(a===X?0:a.getBoundingClientRect()[i?"left":"top"])+(a===X?Q():a)[i?"scrollLeft":"scrollTop"]),l=h.vsRepeat.startIndex,c=h.vsRepeat.endIndex;if(b&&!R.size)l=0,c=1;else{h.$$postDigest(function(){X.requestAnimationFrame(function(){var e=h.vsRepeat.sizesCumulative[x],n=X.getComputedStyle(w[0]),t=R.horizontal?["paddingLeft","paddingRight"]:["paddingTop","paddingBottom"],r=w[0][S]-t.reduce(function(e,t){return e+Number(n[t].slice(0,-2))},0);w[0][S]&&e!==r&&console.warn("vsRepeat: size mismatch. Expected size "+e+"px whereas actual size is "+r+"px. Fix vsSize on element:",g[0])})});var d=n-R.offsetBefore-s;l=_slicedToArray(k(h.vsRepeat.sizesCumulative,d-R.scrollMargin),1)[0],l=Math.max(l,0),c=_slicedToArray(k(h.vsRepeat.sizesCumulative,d+R.scrollMargin+r,l),2)[1],c=Math.min(c,x)}M=Math.min(l,M),_=Math.max(c,_),h.vsRepeat.startIndex=R.latch?M:l,h.vsRepeat.endIndex=R.latch?_:c,_<h.vsRepeat.startIndex&&(h.vsRepeat.startIndex=_);var u=!1;if(null==C?u=!0:null==O&&(u=!0),u||(R.hunked?Math.abs(h.vsRepeat.startIndex-C)>=R.hunkSize||0===h.vsRepeat.startIndex&&0!==C?u=!0:(Math.abs(h.vsRepeat.endIndex-O)>=R.hunkSize||h.vsRepeat.endIndex===x&&O!==x)&&(u=!0):u=h.vsRepeat.startIndex!==C||h.vsRepeat.endIndex!==O),u){var p;h[H]=z.slice(h.vsRepeat.startIndex,h.vsRepeat.endIndex),h.$emit("vsRepeatInnerCollectionUpdated",h.vsRepeat.startIndex,h.vsRepeat.endIndex,C,O),R.scrolledToEnd&&(p=z.length-R.scrolledToEndOffset,(h.vsRepeat.endIndex>=p&&O<p||z.length&&h.vsRepeat.endIndex===z.length)&&h.$eval(R.scrolledToEnd)),R.scrolledToBeginning&&(p=R.scrolledToBeginningOffset,h.vsRepeat.startIndex<=p&&C>h.vsRepeat.startIndex&&h.$eval(R.scrolledToBeginning)),C=h.vsRepeat.startIndex,O=h.vsRepeat.endIndex;var v=h.vsRepeat.sizesCumulative[h.vsRepeat.startIndex]+R.offsetBefore,f=h.vsRepeat.sizesCumulative[h.vsRepeat.startIndex+h[H].length]+R.offsetBefore,m=h.vsRepeat.totalSize;$.css(B(v+"px")),y.css(B(m-f+"px"))}return u}R.horizontal?($.css("height","100%"),y.css("height","100%")):($.css("width","100%"),y.css("width","100%")),e.vsRepeatOptions&&h.$watchCollection(e.vsRepeatOptions,function(e){var t=_extends({},R,e);JSON.stringify(t)!==JSON.stringify(R)&&(Object.assign(R,e),o(R),E())}),h.$watchCollection(N,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];z=e,p()}),a.eq(0).attr(W,D+" in "+H+(J?" "+J:"")),a.addClass("vs-repeat-repeated-element"),w.append($),w.append(a),Y(a)(h,null,{parentBoundTranscludeFn:n}),w.append(y),h.vsRepeat.startIndex=0,h.vsRepeat.endIndex=0,I.on("scroll",m),G.element(X).on("resize",q),h.$on("$destroy",function(){G.element(X).off("resize",q),I.off("scroll",m)}),h.$on("vsRepeatTrigger",p),h.$on("vsScrollToItem",function(e,t){I[0].scrollTop=h.vsRepeat.sizesCumulative[t]}),h.$on("vsRepeatResize",function(){b=!0,f()}),h.$on("vsRenderAll",function(){R.latch&&(h.vsRepeat.endIndex!==x?setTimeout(function(){var e=x;_=Math.max(e,_),h.vsRepeat.endIndex=R.latch?_:e,h[H]=z.slice(h.vsRepeat.startIndex,h.vsRepeat.endIndex),O=h.vsRepeat.endIndex,$.css(B(0)),y.css(B(0)),h.$emit("vsRenderAllDone"),h.$root&&!h.$root.$$phase&&h.$digest()}):h.$emit("vsRenderAllDone"))}),h.$watch(function(){"function"==typeof X.requestAnimationFrame?X.requestAnimationFrame(F):F()})}}}}}]);G.element(document.head).append('<style id="angular-vs-repeat-style">\n\t  \t.vs-repeat-debug-element {\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: red;\n        z-index: 99999999;\n        box-shadow: 0 0 20px red;\n      }\n\n      .vs-repeat-debug-element + .vs-repeat-debug-element {\n        display: none;\n      }\n\n      .vs-repeat-before-content,\n      .vs-repeat-after-content {\n        border: none !important;\n        padding: 0 !important;\n      }\n    </style>'),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)}(window,window.angular);